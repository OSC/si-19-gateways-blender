<head>
    <% if @keepRefreshing %>

        <meta http-equiv="refresh" content="5">

    <% end %>
</head>
<h1>Frames</h1>

<% if ! @images.empty? %>
    <div id="carouselExampleControls" class="carousel slide carousel-thumbnails" data-ride="carousel">
        <div class="carousel-inner">
        <% counter = 0 %>
        <% for image in @images %>
            <% counter += 1 %>
            <% if counter == 1 %>
                <div class="carousel-item active">
                    <img class="d-block w-100" src= "https://ondemand-test.osc.edu/pun/sys/files/api/v1/fs<%= image %>"  alt="Slide <%= counter %>">
                    <p>Frame <%= counter %></p>
                </div>
            <% else %>
                <div class="carousel-item">
                    <img class="d-block w-100" src= "https://ondemand-test.osc.edu/pun/sys/files/api/v1/fs<%= image %>"  alt="Slide <%= counter %>">
                    <p>Frame <%= counter %></p>
                </div>
            <% end %>
        <% end %>
        </div>
        <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
        </a>
    </div>
    <div style="overflow: hidden;">
        <% counter = 0 %>
        <% for image in @images %>
            <% alignment = ["left",  "middle", "right"] %>
            <img src= "https://ondemand-test.osc.edu/pun/sys/files/api/v1/fs<%= image %>" style="width: calc(100%/3); " align = "<%= alignment[counter % 3] %>">
            <% counter += 1 %>
        <% end %>
    </div>
<% else %>
    <h1>Rendering...</h1>
<% end %>
<br/>
<br/>
<br/>
<h3>Render Video Using Frames</h3>
<form action="<%= url("/blend/video") %>" method="post" enctype="multipart/form-data">

   <input type="hidden" name="frames_dir" id="frames_dir" value="<%= @output_dir %>">

   <div class="form-group">

       <label for="project_name">Project</label>

       <input type="text" name="project_name" class="form-control" id="project_name">

       <small class="form-text text-muted">Project to bill RUs to. Ex: PZS000</small>

   </div>

   <div class="form-group">

       <label for="frames_per_sec">Number of Frames per Second in Video</label>

       <input type="number" name="frames_per_sec" id="frames_per_sec" class="form-control" placeholder="Frames per second" min="1">

       <small class="form-text text-muted">More frames per second means faster and shorter video. Standard movies have 24 frames per second.</small>

   </div>

   <div class="form-group">

       <label for="num_cpus">How Many CPUs</label>

       <input type="number" name="num_cpus" class="form-control" id="num_cpus" min="1" max="28">

       <small class="form-text text-muted">More CPUs means less time rendering.</small>

   </div>

   <div class="form-group">

       <label for="num_cpus">Walltime</label>

       <small class="form-text text-muted">Hours</small>

       <input type="number" name="num_hours" class="form-control" id="num_hours" min="0" max="120">

       <small class="form-text text-muted">Minutes</small>

       <input type="number" name="num_minutes" class="form-control" id="num_minutes" min="0" max="59">

   </div>    
   <button type="submit" class="btn btn-primary">Render Video</button>

</form>
   
